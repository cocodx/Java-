缓存穿透  
缓存击穿  
缓存雪崩  
缓存预热  
缓存降级  

#### 缓存穿透？
缓存穿透是指用户请求的数据在缓存中不存在即没有命中，同时在数据库中也不存在，导致用户每次请求该数据都要去数据库中查询一遍，然后返回空。
如果有恶意攻击者不断请求系统中不存在的数据，会导致短时间大量请求落在数据库上，造成数据库压力过大，甚至击垮数据库系统。

解决办法：
1. 布隆过滤器
1. 当缓存未命中，查询持久层也为空，可以将返回的空对象写到缓存中，这样下次请求该key时直接从缓存中查询返回空对象，请求不会落到持久层数据库。
这种方法会存在两个问题：

* 如果有大量的key穿透，缓存空对象会占用宝贵的内存空间。
* 空对象的key设置了过期时间，在这段时间可能会存在缓存和持久层数据不一致的场景。

#### 缓存击穿？
缓存击穿，是指一个key非常热点，在不停的扛着大并发，大并发集中对这一个点进行访问，当这个key在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个屏障上凿开了一个洞。

缓存击穿危害：数据库压力骤增，造成大量请求阻塞  

热点数据永不过期。

#### 缓存雪崩？
缓存雪崩，缓存中数据大批量到过期时间，查询数据量巨大，引起数据库压力过大甚至宕机。

均匀过期，多线程加互斥锁（同一时间只让一个线程构建缓存，其他线程阻塞排队），缓存永不过期。

#### 什么是缓存预热？
缓存预热就是系统上线后，将相关的缓存数据直接加载到缓存系统，这样就可以避免在用户请求的时候，先查询数据库，然后再将数据回写到缓存。

* 数据量不大的时候，工程启动的时候进行加载缓存动作；
* 数据量大的时候，设置一个定时任务脚本，进行缓存的刷新；
* 数据量太大的时候，优先保证热点数据进行提前加载到缓存。

#### 缓存降级
缓存失效，不去访问mysql，去返回默认数据，或者访问服务的内存数据hashmap、echcae